{% extends 'navbar-background.html' %}
{% load static %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="{% static 'profile.css' %}" xmlns="http://www.w3.org/1999/html">
    <link rel="stylesheet" type="text/css" href="{% static 'textdesign.css' %}">
{% endblock %}

{% block body %}
    <div class="container" style="margin-top:30px; margin-bottom: 0">
        <div class="row">
            <div class="col-md-12">
                {% include 'messages.html' %}
            </div>
        </div>
    </div>
    <div class="container emp-profile">
        <div class="row">
            <div class="col-md-4">
                <div class="profile-img">
                    <img alt="Profil Fotoğrafı" style="" src="/media/{{ bilgiler.profilFoto }}">
                    <!--/media/avatar/1/ASCII.JPG-->
                    {% if request.user.username == profil.username %}
                        <form id="form3" action="{% url 'edit-profile' request.user.username %}"
                              method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-6 file btn btn-lg btn-primary">
                                        Fotoğrafı Değiştir
                                        {{ editForm.profilFoto }}
                                    </div>

                                </div>
                                <input type="submit" value="Submıt">

                            </div>

                        </form>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-6">

            </div>
            <div class="col-md-2">

            </div>
        </div>
        <div class="row">
            <div class="col-md-4" style="margin-top: 28px;">
                <div class="profile-work">
                    <hr>
                    <p class="profileleft">Puan - <strong>{{ profil.role_user.puan }}</strong></p>
                    <p class="profileleft">Gönderi Sayısı - <strong>{{ profil.profil.post_count }}</strong></p>
                    <p class="profileleft">Yorum Sayısı - <strong>{{ profil.profil.comment_count }}</strong></p>
                    <p class="profileleft">Bulduğu Film Sayısı - <strong>{{ bilgiler.puan }}</strong></p>
                    <p class="profileleft">Seviye - <strong>{{ profil.role_user.get_role_display }}</strong></p>
                    <hr>
                </div>
            </div>
            <div class="col-md-8">
                <div class="profile-head">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active tabprofile" id="home-tab" data-toggle="tab" href="#home" role="tab"
                               aria-controls="home" aria-selected="true">Hakkında</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link tabprofile" id="edit-tab" data-toggle="tab" href="#edit" role="tab"
                               aria-controls="home" aria-selected="false">Profili Düzenle</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link tabprofile" id="password-tab" data-toggle="tab" href="#passwordChange"
                               role="tab"
                               aria-controls="home" aria-selected="false">Şifre Değiştir</a>
                        </li>
                    </ul>
                </div>
                <div class="tab-content profile-tab" id="myTabContent">
                    <div class="tab-pane fade" id="passwordChange" role="tabpanel"
                         aria-labelledby="password-tab">
                        <form action="{% url 'passchange' %}" method="post">
                            {% csrf_token %}
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Eski Şifre:</label>
                                </div>
                                <div class="col-md-6">
                                    {{ passForm.old_password }}
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Yeni Şifre</label>
                                </div>
                                <div class="col-md-6">
                                    {{ passForm.new_password1 }}
                                    <small class="text-primary"><b>{{ passForm.new_password1.help_text }}</b>
                                    </small>

                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Yeni Şifre Tekrar</label>
                                </div>
                                <div class="col-md-6">
                                    {{ passForm.new_password2 }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <button type="submit" class="button3" style="float: right;">Değiştir</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <div class="row" style="margin-bottom: 20px;">

                            <div class="col-md-6">
                                <label>Kullanıcı Adı</label>

                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.username }}</p>
                            </div>

                        </div>
                        <div class="row" style="margin-bottom: 20px">
                            <div class="col-md-6">
                                <label>Adı</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.profil.ad }}</p>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 20px">
                            <div class="col-md-6">
                                <label>Soyadı</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.profil.soyad }}</p>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 20px">
                            <div class="col-md-6">
                                <label>Email</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.email }}</p>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 20px">
                            <div class="col-md-6">
                                <label>Favori Filmler</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.profil.fav_film }}</p>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 20px">
                            <div class="col-md-6">
                                <label>Favori Yönetmen</label>
                            </div>
                            <div class="col-md-6">
                                <p>{{ profil.profil.fav_yonetmen }}</p>
                            </div>
                        </div>
                        <hr>
                    </div>
                    <div class="tab-pane fade" id="edit" role="tabpanel" aria-labelledby="edit-tab">
                        <form action="{% url 'edit-profile' request.user.username %}" method="post">
                            {% csrf_token %}
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Ad:</label>
                                </div>
                                <div class="col-md-6">
                                    {{ editForm.ad }}
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Soyad:</label>
                                </div>
                                <div class="col-md-6">
                                    {{ editForm.soyad }}
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Favori Filmler:</label>
                                </div>
                                <div class="col-md-6">
                                    {{ editForm.fav_film }}
                                </div>
                            </div>
                            <div class="row" style="margin-bottom: 20px">
                                <div class="col-md-6">
                                    <label>Favori Yönetmen:</label>
                                </div>
                                <div class="col-md-6">
                                    {{ editForm.fav_yonetmen }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <button type="submit" class="button3" style="float: right">Güncelle</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}